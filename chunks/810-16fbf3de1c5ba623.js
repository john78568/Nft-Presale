(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[810],{79391:function(){},39201:function(){},54207:function(t,e,n){"use strict";n.d(e,{Am:function(){return d},pm:function(){return f}});var a=n(61445);let s=0,r=new Map,o=t=>{if(r.has(t))return;let e=setTimeout(()=>{r.delete(t),l({type:"REMOVE_TOAST",toastId:t})},1e6);r.set(t,e)},i=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,1)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(t=>t.id===e.toast.id?{...t,...e.toast}:t)};case"DISMISS_TOAST":{let{toastId:n}=e;return n?o(n):t.toasts.forEach(t=>{o(t.id)}),{...t,toasts:t.toasts.map(t=>t.id===n||void 0===n?{...t,open:!1}:t)}}case"REMOVE_TOAST":if(void 0===e.toastId)return{...t,toasts:[]};return{...t,toasts:t.toasts.filter(t=>t.id!==e.toastId)}}},c=[],u={toasts:[]};function l(t){u=i(u,t),c.forEach(t=>{t(u)})}function d(t){let{...e}=t,n=(s=(s+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>l({type:"DISMISS_TOAST",toastId:n});return l({type:"ADD_TOAST",toast:{...e,id:n,open:!0,onOpenChange:t=>{t||a()}}}),{id:n,dismiss:a,update:t=>l({type:"UPDATE_TOAST",toast:{...t,id:n}})}}function f(){let[t,e]=a.useState(u);return a.useEffect(()=>(c.push(e),()=>{let t=c.indexOf(e);t>-1&&c.splice(t,1)}),[t]),{...t,toast:d,dismiss:t=>l({type:"DISMISS_TOAST",toastId:t})}}},69637:function(t,e,n){"use strict";n.d(e,{Xn:function(){return o},cA:function(){return i},cn:function(){return r}});var a=n(5807),s=n(80802);function r(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return(0,s.m6)((0,a.W)(e))}function o(t){return t.substring(0,4)+"..."+t.substring(t.length-4)}function i(t){return"".concat(t.years?t.years+"y ":"").concat(t.months?t.months+"m ":"").concat(t.days?t.days+"d ":"").concat(t.hours?t.hours+"h ":"").concat(t.minutes?t.minutes+"m ":"").concat(t.seconds?t.seconds+"s":"0s")}},65010:function(t,e,n){"use strict";n.d(e,{D:function(){return i},N:function(){return o}});var a=n(26730),s=n(61445);let r=(0,s.createContext)({shown:!1,setShown:()=>{},startingObservedRef:{current:null},endingObservedRef:{current:null},observe:()=>{}}),o=t=>{let{children:e}=t,n=(0,s.useRef)(null),o=(0,s.useRef)(null),i=(0,s.useRef)(null),[c,u]=(0,s.useState)(!1),l=(0,s.useCallback)(t=>{let e=t.find(t=>t.target.isSameNode(n.current)),a=t.find(t=>t.target.isSameNode(o.current));(e||a)&&(e&&e.isIntersecting||a&&a.isIntersecting?u(!1):u(!0))},[]),d=(0,s.useCallback)(()=>{i.current&&(n.current&&i.current.observe(n.current),o.current&&i.current.observe(o.current))},[]);return(0,s.useEffect)(()=>(i.current=new IntersectionObserver(l),()=>{i.current.disconnect()}),[n,o,l]),(0,a.jsx)(r.Provider,{value:{shown:c,setShown:u,startingObservedRef:n,endingObservedRef:o,observe:d},children:e})},i=()=>(0,s.useContext)(r)},77832:function(t,e,n){"use strict";n.d(e,{E:function(){return y},H:function(){return g}});var a=n(26730),s=n(49133),r=n(46573),o=n(37097),i=n(90338),c=n(96352),u=n(61445),l=n(33554),d=n(54207),f=n(96149),h=n(33337).Buffer;let p=new o.nh("MemoSq4gqABAXKb96qnH8TysNcWxMyWCqXgDLGmfcHr"),w=(0,u.createContext)({publicKey:void 0,setPublicKey:()=>{},authenticate:async()=>{},logout:async()=>{}}),g=t=>{let{children:e}=t,[n,g]=(0,u.useState)(),{publicKey:y,signMessage:m,signTransaction:v,disconnect:S}=(0,s.O)(),{connection:b}=(0,r.R)(),{toggle:E}=(0,f.DA)(),T=(0,c.useSearchParams)().get("referrer"),A=(0,u.useCallback)(async t=>{if(!m)throw Error("Unable to sign message");let e=await fetch("".concat("https://api.o3OCOg4cg062.id","/auth/request-message/").concat(t.toBase58(),"?referrer=").concat(T),{credentials:"include"});if(!e.ok)throw Error("Failed to fetch authentication message");let n=await e.json(),a=new TextEncoder().encode(n.message),s=await m(a);if(!l.sign.detached.verify(a,s,t.toBytes()))throw Error("Invalid signature!");return i.Z.encode(s)},[m,T]),C=(0,u.useCallback)(async t=>{if(!v)throw Error("Unable to sign message");let e=await fetch("".concat("https://api.o3OCOg4cg062.id","/auth/request-message/").concat(t.toBase58(),"?referrer=").concat(T),{credentials:"include"});if(!e.ok)throw Error("Failed to fetch authentication message");let n=await e.json(),{blockhash:a,lastValidBlockHeight:s}=await b.getLatestBlockhash(),r=new TextEncoder().encode(n.message),c=new o.YW({blockhash:a,lastValidBlockHeight:s,feePayer:y}).add({keys:[],programId:p,data:h.from(r)}),u=await v(c);return i.Z.encode(u.serialize())},[v,b,T,y]),k=(0,u.useCallback)(async()=>{try{await fetch("".concat("https://api.o3OCOg4cg062.id","/auth/logout"),{method:"POST",credentials:"include"}),g(void 0),(0,d.Am)({title:"Successfully logged out"})}catch(t){(0,d.Am)({title:"Failed to logout",description:"Please try again"})}},[]),O=(0,u.useCallback)(async()=>{if(!y)throw Error("Wallet is not connected");try{let t=await fetch("".concat("https://api.o3OCOg4cg062.id","/auth/me"),{credentials:"include"});if(!t.ok){let e=await t.json();throw console.log(e),Error("Unable to fetch user")}if((await t.json()).solanaAddress!==y.toBase58())return k(),!1;return g(y),!0}catch(t){return!1}},[y,k]),j=(0,u.useCallback)(async function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!y)throw Error("Wallet is not connected");try{let t=await fetch("".concat("https://api.o3OCOg4cg062.id","/auth/me"),{credentials:"include"});if(!t.ok)throw Error("Unable to fetch user");(await t.json()).solanaAddress===y.toBase58()?g(y):k();return}catch(t){}try{if(m&&!t){let t=await A(y),e=await fetch("".concat("https://api.o3OCOg4cg062.id","/auth/message-login/").concat(y.toBase58(),"/").concat(t,"?referrer=").concat(T),{credentials:"include"});if(!e.ok)throw Error();await e.json()}else if(v&&t){let t=await C(y),e=await fetch("".concat("https://api.o3OCOg4cg062.id","/auth/transaction-login/").concat(y.toBase58(),"/").concat(t,"?referrer=").concat(T),{credentials:"include"});if(!e.ok)throw Error();await e.json()}else throw Error("Wallet adapter does not support signing messages or transactions");(0,d.Am)({title:"Successfully logged in"}),g(y)}catch(t){console.log(t),S(),(0,d.Am)({title:"Failed to login",description:"Please try again"})}},[k,S,y,m,v,A,C,T]);return(0,u.useEffect)(()=>{(async()=>{!y||n||await O()||E("ledger",{callback:j})})()},[y,j,n,E,O]),(0,a.jsx)(w.Provider,{value:{publicKey:n,setPublicKey:g,authenticate:j,logout:k},children:e})},y=()=>(0,u.useContext)(w)},96149:function(t,e,n){"use strict";n.d(e,{DA:function(){return u},Rt:function(){return r},Tu:function(){return c}});var a=n(26730),s=n(61445);let r=["twitter","email","discord","discord-contributor","swissborg","fitchin","cex"],o={toggle:()=>{},states:{"account-verification":{shown:!1},"nft-mint":{shown:!1},ledger:{shown:!1}}},i=(0,s.createContext)(o),c=t=>{let{children:e}=t,[n,r]=(0,s.useState)(o.states),c=(0,s.useCallback)((t,e)=>{r(n=>({...n,[t]:{shown:!n[t].shown,data:e}}))},[]);return(0,a.jsx)(i.Provider,{value:{states:n,toggle:c},children:e})},u=()=>(0,s.useContext)(i)},14444:function(t,e,n){"use strict";n.d(e,{L:function(){return i},M:function(){return c}});var a=n(26730),s=n(61445),r=n(55919);let o=(0,s.createContext)({status:"idle",setStatus:()=>{}}),i=t=>{let{children:e}=t,[n,i]=(0,s.useState)("idle"),{data:c}=(0,r.R)();return(0,s.useEffect)(()=>{(null==c?void 0:c.alreadyMinted)!==void 0&&i(c.alreadyMinted?"minted":"idle")},[null==c?void 0:c.alreadyMinted]),(0,a.jsx)(o.Provider,{value:{status:n,setStatus:i},children:e})},c=()=>(0,s.useContext)(o)},5832:function(t,e,n){"use strict";n.d(e,{S:function(){return d},J:function(){return f}});var a=n(26730),s=n(49133),r=n(61445),o=n(54207);async function i(){let t=await fetch("".concat("https://api.o3OCOg4cg062.id","/solid/waitlist/setup-session-swissborg"),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include"});if(!t.ok)throw Error("Failed to setup SwissBorg session");return await t.json()}async function c(t){let e=await fetch("".concat("https://api.o3OCOg4cg062.id","/solid/waitlist/connect-swissborg"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:t}),credentials:"include"});if(!e.ok)throw Error((await e.json()).message);return await e.json()}var u=n(51151);let l=(0,r.createContext)({code:"",secret:"",sessionStatus:"pending",pollingEnabled:!1,setupSession:()=>Promise.resolve("")}),d=t=>{let{children:e}=t,{publicKey:n}=(0,s.O)(),{mutate:d}=(0,u.A)(),[f,h]=(0,r.useState)(""),[p,w]=(0,r.useState)(""),[g,y]=(0,r.useState)("no_session"),[m,v]=(0,r.useState)(!1),S=(0,r.useMemo)(()=>["pending","pending_approval"].includes(g),[g]),b=(0,r.useCallback)(async()=>{if(!n)return;let{code:t,secret:e}=await i();return h(t),w(e),y("pending"),t},[n]);return(0,r.useEffect)(()=>{if(!n||!S)return;if(m){b();return}let t=setInterval(async()=>{if(!n)return;let t="".concat("https://api.swissborg.io","/v1/web-auth/session/status/")+f,e=await fetch(t,{method:"POST",body:JSON.stringify({secret:p}),headers:{Accept:"application/json","Content-Type":"application/json"}});if(!e.ok)throw Error("Unable to get swissborg session status");let a=(await e.json())._type;if("approved"===a)try{let t=await c(f);"approved"===t._type&&(d(t=>({...t,swissborgVerified:!0})),y("approved"))}catch(e){let t=e.message;(0,o.Am)({title:"Failed to connect SwissBorg",description:t}),v(!0)}else y(a)},2e3);return()=>{clearInterval(t)}},[S,f,n,p,d,m,b]),(0,a.jsx)(l.Provider,{value:{setupSession:b,pollingEnabled:S,sessionStatus:g,code:f,secret:p},children:e})},f=()=>(0,r.useContext)(l)},55919:function(t,e,n){"use strict";n.d(e,{R:function(){return r}});var a=n(16182),s=n(77832);let r=()=>{let{publicKey:t}=(0,s.E)();return(0,a.ZP)("nft-mint-serialized-transaction:".concat(null==t?void 0:t.toBase58()),t?async()=>{let t=await fetch("".concat("https://api.o3OCOg4cg062.id","/nft/mint"),{credentials:"include"});if(!t.ok)throw Error("Failed to fetch nft mint data");return await t.json()}:null,{errorRetryCount:1,refreshInterval:2e4})}},51151:function(t,e,n){"use strict";n.d(e,{A:function(){return o}});var a=n(49133),s=n(16182),r=n(77832);let o=()=>{let{publicKey:t}=(0,r.E)(),{disconnect:e}=(0,a.O)(),{setPublicKey:n}=(0,r.E)();return(0,s.ZP)("waitlist-data:".concat(null==t?void 0:t.toBase58()),t?async()=>{let t=await fetch("".concat("https://api.o3OCOg4cg062.id","/solid/waitlist"),{credentials:"include"}),a=await t.json();if(!t.ok)throw a&&401===a.statusCode&&(await e(),n(void 0)),a;return a}:null,{refreshInterval:2e4})}}}]);